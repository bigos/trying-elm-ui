* README

This is example Rails 8 app that uses Elm and elm-ui.

Important find about colors liminance
https://www.w3.org/TR/WCAG20-TECHS/G17.html

** Rails
https://ruby-doc.org/3.4.1/

*** app
file:~/Programming/Rails/trying-elm-ui/

file:~/Programming/Rails/trying-elm-ui/config/routes.rb::1

file:~/Programming/Rails/trying-elm-ui/app/controllers/

*** view
file:~/Programming/Rails/trying-elm-ui/app/views/

file:~/Programming/Rails/trying-elm-ui/app/views/home/page.html.erb::1

*** vendor
file:~/Programming/Rails/trying-elm-ui/vendor/

file:~/Programming/Rails/trying-elm-ui/vendor/elm/ui-experiment/

*** public
file:~/Programming/Rails/trying-elm-ui/public/

elm js file
file:~/Programming/Rails/trying-elm-ui/public/ui-experiment.js::1

** Elm documentation
https://package.elm-lang.org/

https://korban.net/elm/elm-ui-patterns/

decoder example
file:~/Programming/Pyrulis/Elm/readingElmInAction/PhotoGroove/src/PhotoFolders.elm::248

** restclient

#+begin_src restclient
  GET http://localhost:3000/
#+end_src

#+begin_src restclient
  POST http://localhost:3000/api/list-files
  Content-Type: application/json

  {"pwd":"/home/jacek/","show_hidden":false}
#+end_src

#+begin_src restclient
  GET http://localhost:3000/api/get-files?pwd=/home/jacek/&show_hidden=true
  Content-Type: application/json

#+end_src

** Purescript
We have example of incorporating a PureScript app in rails view

[[file:app/views/pure_script/show.html.erb::js_filename = 'index.js']]

On PureScript side we compile the app: ~npm run build-prod~
and then we link it on rails side

https://github.com/bigos/Pyrulis/blob/master/Purescript/halogen/counter/src/App/Counter.purs

simple projects
file:~/Programming/Pyrulis/Purescript/

** Rescript
I was able to modify the html file
file:~/Programming/Rails/trying-elm-ui/app/views/re_script/show.html.erb::19
modifying src of the script

and copied the JS file
from
file:~/Programming/Rails/trying-elm-ui/vendor/rescript/my-rectript-experiment/dist/assets/index-CGiRQrRV.js::1
to
file:~/Programming/Rails/trying-elm-ui/public/

** Interesting APIs

*** TheCocktailDB
https://www.thecocktaildb.com/

[[https://github.com/nunntom/elm-ui-select/blob/9f80e5d943a51a034a11e76ba8a788ec2627a206/examples/src/RequestExample.elm#L71][el-request-example]]

** temporary notes

*** ui experiment
[[file:vendor/elm/ui-experiment/src/UiExperiment.elm::type alias Model =]]

 try
[[file:vendor/elm/ui-experiment/src/UiExperiment.elm::fileListDecoder : Decoder Files]]

files
[[file:vendor/elm/ui-experiment/src/UiExperiment.elm::type alias Files =]]
has pwd
that is shown at the bottom of the web page

#+begin_example
pwd = "/home/jacek", showHidden = True },
#+end_example

and is decoded here
[[file:vendor/elm/ui-experiment/src/UiExperiment.elm::Decode.succeed Files]]

*** Cocktails

**** views
file:~/Programming/Ruby/trying-elm-ui/app/views/cocktail/

elm
file:~/Programming/Ruby/trying-elm-ui/app/views/cocktail/elm.html.erb::1
halogen
file:~/Programming/Ruby/trying-elm-ui/app/views/cocktail/halogen.html.erb::1

**** vendor
file:~/Programming/Ruby/trying-elm-ui/vendor/

file:~/Programming/Ruby/trying-elm-ui/vendor/elm/cocktails/
file:~/Programming/Ruby/trying-elm-ui/vendor/purescript/cocktails/

***** example of compilation
elm
https://github.com/nunntom/elm-ui-select/blob/4.0.0/examples/src/RequestExample.elm
file:~/Programming/Ruby/trying-elm-ui/vendor/elm/ui-experiment/compile.sh::1

halogen will be more complicated
file:~/Programming/Ruby/trying-elm-ui/vendor/purescript/flame/counter/README.org::1
file:~/Programming/Ruby/trying-elm-ui/public/

firstly I tried compilation
file:~/Programming/Ruby/trying-elm-ui/vendor/elm/cocktails/compile-cocktails.sh::1

then I moved the folder to backup

then i tried initial setup
https://github.com/purescript-halogen/purescript-halogen-template#initial-setup
with modification
#+begin_example
git clone https://github.com/purescript-halogen/purescript-halogen-template.git cocktails
cd cocktails

rm -rvf ./.github
rm -rvf ./.git

npm install --save-exact --save-dev esbuild
npm install
npm run build
npm run build-prod

#+end_example

and got the initial file
file:~/Programming/Rails/trying-elm-ui/vendor/purescript/cocktails/src/Main.purs::1

and built files
file:~/Programming/Rails/trying-elm-ui/vendor/purescript/cocktails/dist/

problem compiling the PS code

and a very good description of solving such problems
https://stackoverflow.com/a/79564703/1395810

***** giving up on project with flags

So I recreated the cocktails project from the template and built it

***** linking of built files
file:~/Programming/Rails/trying-elm-ui/link_files::1

***** no progress
file:~/Programming/Ruby/trying-elm-ui/vendor/purescript/cocktails/src/Main.purs::1
file:~/Programming/Ruby/trying-elm-ui/vendor/purescript/cocktails/src/App/Cocktails.purs::1

**** trying to copy the Elm example

***** Elm GET
[[file:vendor/elm/cocktails/src/Cocktails.elm::type alias Cocktail =]]
[[file:vendor/elm/cocktails/src/Cocktails.elm::fetchCocktails query tagger =]]

***** other halogen POST
[[file:vendor/purescript/halogen/counter/src/App/Counter.purs::data PostStatus = Empty | OkPosted Files | ErrorPosted String]]
[[file:vendor/purescript/halogen/counter/src/App/Counter.purs::data Action]]
[[file:vendor/purescript/halogen/counter/src/App/Counter.purs::\[ HE.onClick \_ -> MakeRequestPost \]]]
[[file:vendor/purescript/halogen/counter/src/App/Counter.purs::MakeRequestPost -> do]]

**** auto-completion
https://github.com/citizennet/purescript-halogen-select/tree/master

https://citizennet.github.io/purescript-halogen-select/tutorials/getting-started/

install psc-package
https://github.com/purescript/psc-package
https://github.com/purescript/psc-package/releases

use psc-package to install the selector
https://citizennet.github.io/purescript-halogen-select/

failed, giving up
#+begin_example
$  psc-package install halogen-select
psc-package.json does not exist. Maybe you need to run psc-package init?

$ psc-package init
Initializing new project in current directory
Using the default package set for PureScript compiler version 0.15.15
(Use --source / --set to override this behavior)
warning: Could not find remote branch psc-0.15.15 to clone.
fatal: Remote branch psc-0.15.15 not found in upstream origin
#+end_example
